window.onload=function(){let focusBox=document.querySelector('.focus');let arrow_l=focusBox.querySelector('.arrow-l');let arrow_r=focusBox.querySelector('.arrow-r');let list=focusBox.querySelector('ul');let circle=focusBox.querySelector('ol');let focusWidth=list.children[0].offsetWidth;focusBox.addEventListener('mouseenter',function(){arrow_l.style.display='block';arrow_r.style.display='block';clearInterval(autoChange);autoChange=null});focusBox.addEventListener('mouseleave',function(){arrow_l.style.display='none';arrow_r.style.display='none';autoChange=setInterval(function(){arrow_r.click()},3000)});for(let i=0;i<list.children.length;i++){let dot=document.createElement('li');circle.appendChild(dot)}for(let i=0;i<circle.children.length;i++){circle.children[i].onclick=function(){animate(list,-focusWidth*i);for(let i=0;i<circle.children.length;i++){circle.children[i].classList.remove('current')}this.classList.add('current')}}let clickTimes=0;circle.children[0].classList.add('current');let firstClone=list.children[0].cloneNode(true);list.appendChild(firstClone);arrow_r.addEventListener('click',function(){change('right')});arrow_l.addEventListener('click',function(){change('left')});let flag=true;function change(a){if(flag){flag=false;clickTimes=getFocusLeft()/-focusWidth;if(a=='right'){clickTimes++}else if(a=='left'){clickTimes--}if(clickTimes==list.children.length){list.style.left=0;clickTimes=1}else if(clickTimes===-1){list.style.left=-focusWidth*(list.children.length-1)+'px';clickTimes=list.children.length-2}animate(list,-focusWidth*clickTimes,function(){flag=true});for(let i=0;i<circle.children.length;i++){circle.children[i].classList.remove('current')}if(clickTimes==4){circle.children[0].classList.add('current')}else{circle.children[clickTimes].classList.add('current')}}}let autoChange=setInterval(function(){arrow_r.click()},3000);function getFocusLeft(){return list.style.left.replace('px',0)/10}};